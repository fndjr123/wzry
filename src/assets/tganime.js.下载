!function(e){var t={};function n(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(l,r,function(t){return e[t]}.bind(null,r));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function l(e,t){let n=document.querySelector(e),l=(n.offsetLeft,n.children),r=l.length;parseInt(n.clientWidth/r);if(t){let e=document.createElement("div");e.className="slider";let t=document.createElement("div");t.className="bar",t.style.width=1/r*100+"%";for(let e of l)e.style.width=1/r*100+"%";e.appendChild(t),n.appendChild(e)}return $bar}n.r(t);let r=(e,t)=>{var n=t||function(){},l=document.createElement("link");l.rel="stylesheet",l.href=e,l.onload=l.onreadystatechange=function(){n()},document.getElementsByTagName("head")[0].appendChild(l)},o=e=>{let t={url:e.url||"",params:{}||e.params,loadRemove:!0,loading:e.loading,callback:e.callback||function(){}};t.loading&&common.ajaxLoading("show");let n=document.createElement("script");n.async="async";for(let e in t.params)n[e]=t.params[e];n.src=t.url,n.onload=n.onreadystatechange=function(){this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||t.callback()},document.getElementsByTagName("head")[0].appendChild(n)};n.d(t,"TGAnime",function(){return s});var s={init:(e,t)=>{switch(e){case"tganime-tab-underline":l();break;case"tganime-slide-slidein":!function(e){let t=document.querySelector(e.tab),n=(t.offsetLeft,document.querySelectorAll(e.tabChild)||t.children);console.log(n);let r=n.length,o=e.autoplay||!1,s=e.loop||!1,a=0,i=0,c=0,d=0,u=!0;parseInt(t.clientWidth/r);for(var f=0;f<r;f++)!function(t){n[t].addEventListener("mouseover",l=>{i=-1*(a=t)*100/r;for(let e of n)e.classList.remove("on");n[a].classList.add("on"),h.style.transform="translate("+i+"%, 0)",e.slider&&(m.style.marginLeft=1/r*a*100+"%")}),n[t].addEventListener("touchstart",l=>{a=t,console.log(a),i=-1*a*100/r;for(let e of n)e.classList.remove("on");n[a].classList.add("on"),h.style.transform="translate("+i+"%, 0)",e.slider&&(m.style.marginLeft=1/r*a*100+"%")})}(f);let m=e.slider?l(e.tab,e.slider):null,h=document.querySelector(e.slide);t.children,h.style.width=100*r+"%";let p=h.children;for(let e of p)e.style.width=1/r*100+"%";h.addEventListener("touchstart",e=>{c=e.touches[0].clientX,d=e.touches[0].clientY},!1),h.addEventListener("touchmove",e=>{u&&Math.abs(c-e.touches[0].clientX)>Math.abs(d-e.touches[0].clientY)&&(u=!1,c-e.touches[0].clientX>0?y.slideToNext():y.slideToPrev())},!1),h.addEventListener("touchend",e=>{u=!0},!1),o&&setInterval(()=>{y.slideToNext()},o);var y={slideToNext:()=>{++a==r&&(a=s?0:r-1);for(let e of n)e.classList.remove("on");n[a].classList.add("on"),i=-1*a*100/r,n[a].classList.add("on"),h.style.transform="translate("+i+"%, 0)",e.slider&&(m.style.marginLeft=1/r*a*100+"%")},slideToPrev:()=>{--a<0&&(a=s?r-1:0);for(let e of n)e.classList.remove("on");n[a].classList.add("on"),i=-1*a*100/r,n[a].classList.add("on"),h.style.transform="translate("+i+"%, 0)",e.slider&&(m.style.marginLeft=1/r*a*100+"%")}}}(t);break;case"tganime-slide-book":!function(e){let t={loop:!0,speed:600,grabCursor:!0,watchSlidesProgress:!0,mousewheelControl:!0,keyboardControl:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{progress:function(){let e=this;for(let t=0;t<e.slides.length;t++){let n=e.slides[t].progress*(.5*e.width);e.slides[t].querySelector(".tganime-slide-inner").style.transform="translate3d("+n+"px, 0, 0)"}},touchStart:function(){let e=this;for(let t=0;t<e.slides.length;t++)e.slides[t].style.transition=""},setTransition:function(e){let t=this;for(let n=0;n<t.slides.length;n++)t.slides[n].style.transition=e+"ms",t.slides[n].querySelector(".tganime-slide-inner").style.transition=e+"ms"}}};r("https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/css/swiper.min.css",function(){o({url:"https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.0.7/js/swiper.min.js",callback:function(){let n=Object.assign(t,e);new Swiper(e.container,n)}})})}(t);break;case"tganime-header-fix":!function(){let e,t=document.querySelector(".tganime-header-fix"),n=t.getBoundingClientRect().top,l=(t.clientHeight,[]),r={init:()=>{e=r.queryChild(t);for(let t of e)l.push(t.clientHeight)},scaleHeader:()=>{t.classList.add("fix")},resetChild:()=>{t.style.height="auto";let e=r.queryChild(t);for(let t of e)t.style.transition="tranform .3s ease-in-out",t.style.transformOrigin="top left",t.style.transform="translateY(0)"},queryChild:e=>{let t=e.children;return 1==t.length?r.queryChild(t[0]):t}};r.init(),0!=window.scrollY&&(n=window.scrollY+n,r.scaleHeader()),window.onscroll=function(){window.scrollY>=n?t.className.indexOf(" fix")<0&&r.scaleHeader():t.classList.remove("fix")}}();break;case"tganime-overlay-fadein":!function(e){let t=document.querySelector(e.overlay);document.querySelector(e.trigger),document.addEventListener("click",n=>{if(n.target.className.indexOf(e.overlay)<0&&t.className.indexOf("show")>-1){t.classList.remove("fadein");let e=setTimeout(()=>{t.classList.remove("show"),clearTimeout(e)},100)}else if(n.target.className.indexOf(e.trigger.replace(".",""))>-1&&t.className.indexOf("show")<0){t.classList.add("show");let e=setTimeout(()=>{t.classList.add("fadein"),clearTimeout(e)},100)}})}(t);break;case"tganime-totop":!function(e){let t;document.querySelector(e.container).addEventListener("click",e=>{e.stopPropagation(),n.scrollToTop()}),document.addEventListener("touchstart",e=>{clearInterval(t)}),document.addEventListener("mousewheel",e=>{clearInterval(t)});let n={scrollToTop:()=>{let e=!0,n=!1;0==n?t=setInterval(function(){let n=document.documentElement.scrollTop||document.body.scrollTop,l=Math.floor(-n/3);document.documentElement.scrollTop=document.body.scrollTop=n+l,e=!0,0==n&&clearInterval(t)},50):(clearInterval(t),n=!0)}}}(t);break;default:return}}};window.TGAnime=s}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3RhYi90Z2FuaW1lLXRhYi11bmRlcmxpbmUvdGdhbmltZS10YWItdW5kZXJsaW5lLmpzIiwid2VicGFjazovLy8uL3NyYy91dGlsL3RnYW5pbWUtdXRpbC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvdGdhbmltZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvc2xpZGUvdGdhbmltZS1zbGlkZS1zbGlkZWluL3RnYW5pbWUtc2xpZGUtc2xpZGVpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheS90Z2FuaW1lLXNsaWRlLWJvb2svdGdhbmltZS1zbGlkZS1ib29rLmpzIiwid2VicGFjazovLy8uL3NyYy9wYXJlbnRpbmcvdGdhbmltZS1oZWFkZXItZml4L3RnYW5pbWUtaGVhZGVyLWZpeC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheS90Z2FuaW1lLW92ZXJsYXktZmFkZWluL3RnYW5pbWUtb3ZlcmxheS1mYWRlaW4uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2RvbGx5em9vbS90Z2FuaW1lLXRvdG9wL3RnYW5pbWUtdG90b3AuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJpbml0VGFiVW5kZXJsaW5lIiwiX3RhYiIsIl9pc1NsaWRlciIsIiR0YWIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCIkdGFiQ2hpbGQiLCJvZmZzZXRMZWZ0IiwiY2hpbGRyZW4iLCJjaGlsZExlbmd0aCIsImxlbmd0aCIsInBhcnNlSW50IiwiY2xpZW50V2lkdGgiLCIkc2xpZGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsIiRiYXIiLCJzdHlsZSIsIndpZHRoIiwidmFsIiwiYXBwZW5kQ2hpbGQiLCJnZXRDc3NMaW5rIiwiX3VybCIsIl9jYWxsYmFjayIsImNhbGxiYWNrIiwibGluayIsInJlbCIsImhyZWYiLCJvbmxvYWQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImdldFNjcmlwdCIsIm9wdCIsIm9wdGlvbnMiLCJ1cmwiLCJwYXJhbXMiLCJsb2FkUmVtb3ZlIiwibG9hZGluZyIsImNvbW1vbiIsImFqYXhMb2FkaW5nIiwic2NyaXB0IiwiYXN5bmMiLCJxIiwic3JjIiwidGhpcyIsInJlYWR5U3RhdGUiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiVEdBbmltZSIsImluaXQiLCJfY2xhc3MiLCJfb2JqIiwidGFiIiwicXVlcnlTZWxlY3RvckFsbCIsInRhYkNoaWxkIiwiY29uc29sZSIsImxvZyIsIl9jaGlsZExlbmd0aCIsImF1dG8iLCJhdXRvcGxheSIsImxvb3AiLCJpbmRleCIsInN0ZXAiLCJ0b3VjaE9mZnNldFgiLCJ0b3VjaE9mZnNldFkiLCJjYW5Ub3VjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwiYWRkIiwiJGNvbnRhaW5lciIsInRyYW5zZm9ybSIsInNsaWRlciIsIm1hcmdpbkxlZnQiLCJzbGlkZSIsIiRsaXN0Q2hpbGQiLCJ0b3VjaGVzIiwiY2xpZW50WCIsImNsaWVudFkiLCJNYXRoIiwiYWJzIiwiZm9vIiwic2xpZGVUb05leHQiLCJzbGlkZVRvUHJldiIsInNldEludGVydmFsIiwiaW5pdFNsaWRlSW4iLCJzd2lwZXJPcHRpb25zIiwic3BlZWQiLCJncmFiQ3Vyc29yIiwid2F0Y2hTbGlkZXNQcm9ncmVzcyIsIm1vdXNld2hlZWxDb250cm9sIiwia2V5Ym9hcmRDb250cm9sIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsIm9uIiwicHJvZ3Jlc3MiLCJzd2lwZXIiLCJzbGlkZXMiLCJpbm5lclRyYW5zbGF0ZSIsInRvdWNoU3RhcnQiLCJ0cmFuc2l0aW9uIiwic2V0VHJhbnNpdGlvbiIsImFzc2lnbiIsIlN3aXBlciIsImNvbnRhaW5lciIsImluaXRTbGlkZUJvb2siLCIkaGVhZGVyQ2hpbGQiLCIkaGVhZGVyIiwiZGVmYXVsdFRvcCIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsInRvcCIsImhlYWRlckhlaWdodEFyciIsImNsaWVudEhlaWdodCIsImZuIiwicXVlcnlDaGlsZCIsImVsIiwicHVzaCIsInNjYWxlSGVhZGVyIiwicmVzZXRDaGlsZCIsImhlaWdodCIsInRyYW5zZm9ybU9yaWdpbiIsIl9lbCIsIiRjaGlsZHJlbiIsIndpbmRvdyIsInNjcm9sbFkiLCJvbnNjcm9sbCIsImluZGV4T2YiLCJpbml0SGVhZGVyRml4IiwiJG92ZXJsYXkiLCJvdmVybGF5IiwidHJpZ2dlciIsInRhcmdldCIsInRyaWdnZXJIaWRlVGltZXIiLCJzZXRUaW1lb3V0IiwiY2xlYXJUaW1lb3V0IiwicmVwbGFjZSIsInRyaWdnZXJTaG93VGltZXIiLCJpbml0T3ZlcmxheUZhZGVpbiIsInRpbWVyIiwic3RvcFByb3BhZ2F0aW9uIiwidXRpbCIsInNjcm9sbFRvVG9wIiwiY2xlYXJJbnRlcnZhbCIsImlzVG9wIiwiY2FuY2VsU2Nyb2xsIiwib3NUb3AiLCJkb2N1bWVudEVsZW1lbnQiLCJzY3JvbGxUb3AiLCJib2R5IiwiaXNwZWVkIiwiZmxvb3IiLCJpbml0VG90b3AiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMs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RCxVQUFBRixFQUFBSSxFQUNBTixHQUFBLEVBQ0EsR0FBQUUsR0FDQUgsY0FBQUosSUFFUyxLQUVUSSxjQUFBSixHQUNBTSxHQUFBLEtMUlFPLENBQVN0RyxHQUNqQixNQUNBLFFBQ0EsVUFLQTBFLE9BQUE3RSIsImZpbGUiOiJ0Z2FuaW1lLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdFRhYlVuZGVybGluZShfdGFiLCBfaXNTbGlkZXIpIHtcbiAgbGV0ICR0YWIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCBfdGFiICk7XG4gIGxldCB0YWJPZmZzZXRMZWZ0ID0gJHRhYi5vZmZzZXRMZWZ0O1xuICBsZXQgJHRhYkNoaWxkID0gJHRhYi5jaGlsZHJlbjtcbiAgbGV0IGNoaWxkTGVuZ3RoID0gJHRhYkNoaWxkLmxlbmd0aDtcbiAgbGV0IHRhYldpZHRoID0gcGFyc2VJbnQoJHRhYi5jbGllbnRXaWR0aC9jaGlsZExlbmd0aCk7XG5cbiAgaWYgKF9pc1NsaWRlcikge1xuICAgIGxldCAkc2xpZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgJHNsaWRlci5jbGFzc05hbWUgPSAnc2xpZGVyJztcbiAgXG4gICAgbGV0ICRiYXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAkYmFyLmNsYXNzTmFtZSA9ICdiYXInO1xuICAgICRiYXIuc3R5bGUud2lkdGggPSAxIC8gY2hpbGRMZW5ndGggKiAxMDAgKyAnJSc7XG4gICAgXG4gICAgZm9yKGxldCB2YWwgb2YgJHRhYkNoaWxkKSB7XG4gICAgICB2YWwuc3R5bGUud2lkdGggPSAxIC8gY2hpbGRMZW5ndGggKiAxMDAgKyAnJSc7XG4gICAgfVxuICBcbiAgICAkc2xpZGVyLmFwcGVuZENoaWxkKCRiYXIpO1xuICAgICR0YWIuYXBwZW5kQ2hpbGQoJHNsaWRlcik7XG4gIH1cblxuICAvLyAkdGFiLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIChlKSA9PiB7XG4gIC8vICAgbGV0IG9mZnNldFggPSBlLnRhcmdldC5vZmZzZXRMZWZ0IC0gdGFiT2Zmc2V0TGVmdDtcbiAgLy8gICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKG9mZnNldFgvdGFiV2lkdGgpO1xuICAgIFxuICAvLyAgICRiYXIuc3R5bGUubWFyZ2luTGVmdCA9IDEgLyBjaGlsZExlbmd0aCAqIGluZGV4ICogMTAwICsgJyUnO1xuICAvLyB9KTtcblxuICByZXR1cm4gJGJhcjtcbn0iLCIgIGxldCBnZXRDc3NMaW5rID0gKF91cmwsIF9jYWxsYmFjaykgPT4ge1xuICAgIHZhciBjYWxsYmFjayA9IF9jYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fTtcbiAgICB2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgICBsaW5rLnJlbCA9ICdzdHlsZXNoZWV0JztcbiAgICBsaW5rLmhyZWYgPSBfdXJsO1xuXG4gICAgbGluay5vbmxvYWQgPSBsaW5rLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNhbGxiYWNrKCk7XG4gICAgfTtcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQobGluayk7XG4gIH1cblxuICBsZXQgZ2V0U2NyaXB0ID0gKG9wdCkgPT4ge1xuICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgdXJsOiBvcHQudXJsIHx8ICcnLFxuICAgICAgcGFyYW1zOiB7fSB8fCBvcHQucGFyYW1zLFxuICAgICAgbG9hZFJlbW92ZTogdHJ1ZSxcbiAgICAgIGxvYWRpbmc6IG9wdC5sb2FkaW5nLFxuICAgICAgY2FsbGJhY2s6IG9wdC5jYWxsYmFjayB8fCBmdW5jdGlvbiAoKSB7fVxuICAgIH07XG5cbiAgICBpZiAob3B0aW9ucy5sb2FkaW5nKSB7XG4gICAgICBjb21tb24uYWpheExvYWRpbmcoJ3Nob3cnKTtcbiAgICB9XG4gICAgbGV0IHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuICAgIHNjcmlwdC5hc3luYyA9IFwiYXN5bmNcIjtcbiAgICBmb3IgKGxldCBxIGluIG9wdGlvbnMucGFyYW1zKSB7XG4gICAgICBzY3JpcHRbcV0gPSBvcHRpb25zLnBhcmFtc1txXTtcbiAgICB9XG4gICAgc2NyaXB0LnNyYyA9IG9wdGlvbnMudXJsO1xuICAgIHNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKCF0aGlzLnJlYWR5U3RhdGUgfHwgdGhpcy5yZWFkeVN0YXRlID09PSBcImxvYWRlZFwiIHx8IHRoaXMucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiKSB7XG4gICAgICAgIG9wdGlvbnMuY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICB9XG5cbiAgZXhwb3J0IHtcbiAgICBnZXRDc3NMaW5rLFxuICAgIGdldFNjcmlwdFxuICB9IiwiaW1wb3J0IGluaXRUYWJVbmRlcmxpbmUgZnJvbSAnLi90YWIvdGdhbmltZS10YWItdW5kZXJsaW5lL3RnYW5pbWUtdGFiLXVuZGVybGluZSdcbmltcG9ydCBpbml0U2xpZGVJbiBmcm9tICcuL3NsaWRlL3RnYW5pbWUtc2xpZGUtc2xpZGVpbi90Z2FuaW1lLXNsaWRlLXNsaWRlaW4nXG5pbXBvcnQgaW5pdFNsaWRlQm9vayBmcm9tICcuL292ZXJsYXkvdGdhbmltZS1zbGlkZS1ib29rL3RnYW5pbWUtc2xpZGUtYm9vaydcbmltcG9ydCBpbml0SGVhZGVyRml4IGZyb20gJy4vcGFyZW50aW5nL3RnYW5pbWUtaGVhZGVyLWZpeC90Z2FuaW1lLWhlYWRlci1maXgnXG5pbXBvcnQgaW5pdE92ZXJsYXlGYWRlaW4gZnJvbSAnLi9vdmVybGF5L3RnYW5pbWUtb3ZlcmxheS1mYWRlaW4vdGdhbmltZS1vdmVybGF5LWZhZGVpbidcbmltcG9ydCBpbml0VG90b3AgZnJvbSAnLi9kb2xseXpvb20vdGdhbmltZS10b3RvcC90Z2FuaW1lLXRvdG9wJ1xuXG52YXIgVEdBbmltZSA9IHtcbiAgaW5pdDogKF9jbGFzcywgX29iaikgPT4ge1xuICAgIHN3aXRjaCAoX2NsYXNzKSB7XG4gICAgICBjYXNlICd0Z2FuaW1lLXRhYi11bmRlcmxpbmUnOlxuICAgICAgICBpbml0VGFiVW5kZXJsaW5lKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGdhbmltZS1zbGlkZS1zbGlkZWluJzpcbiAgICAgICAgaW5pdFNsaWRlSW4oX29iaik7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGdhbmltZS1zbGlkZS1ib29rJzpcbiAgICAgICAgaW5pdFNsaWRlQm9vayhfb2JqKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0Z2FuaW1lLWhlYWRlci1maXgnOlxuICAgICAgICBpbml0SGVhZGVyRml4KCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGdhbmltZS1vdmVybGF5LWZhZGVpbic6XG4gICAgICAgIGluaXRPdmVybGF5RmFkZWluKF9vYmopO1xuICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAndGdhbmltZS10b3RvcCc6XG4gICAgICAgIGluaXRUb3RvcChfb2JqKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm47XG4gICAgfVxuICB9XG59XG5cbndpbmRvdy5UR0FuaW1lID0gVEdBbmltZTtcblxuZXhwb3J0IHtcbiAgVEdBbmltZVxufTsiLCJpbXBvcnQgaW5pdFRhYlVuZGVybGluZSBmcm9tICcuLi8uLi90YWIvdGdhbmltZS10YWItdW5kZXJsaW5lL3RnYW5pbWUtdGFiLXVuZGVybGluZSdcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdFNsaWRlSW4oX29iaikge1xuICBsZXQgJHRhYiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX29iai50YWIpO1xuICBsZXQgdGFiT2Zmc2V0TGVmdCA9ICR0YWIub2Zmc2V0TGVmdDtcbiAgbGV0ICR0YWJDaGlsZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoX29iai50YWJDaGlsZCkgfHwgJHRhYi5jaGlsZHJlbjtcbiAgY29uc29sZS5sb2coJHRhYkNoaWxkKTtcbiAgbGV0IF9jaGlsZExlbmd0aCA9ICR0YWJDaGlsZC5sZW5ndGg7XG4gIGxldCBhdXRvID0gX29iai5hdXRvcGxheSB8fCBmYWxzZTtcbiAgbGV0IGxvb3AgPSBfb2JqLmxvb3AgfHwgZmFsc2U7XG4gIGxldCBpbmRleCA9IDA7XG4gIGxldCBzdGVwID0gMDtcblxuICBsZXQgdG91Y2hPZmZzZXRYID0gMDtcbiAgbGV0IHRvdWNoT2Zmc2V0WSA9IDA7XG4gIGxldCBjYW5Ub3VjaCA9IHRydWU7XG4gIGxldCB0b3VjaFRpbWVyO1xuXG4gIGxldCB0YWJXaWR0aCA9IHBhcnNlSW50KCR0YWIuY2xpZW50V2lkdGggLyBfY2hpbGRMZW5ndGgpO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgX2NoaWxkTGVuZ3RoOyBpKyspIHtcbiAgICAoZnVuY3Rpb24gKG4pIHtcbiAgICAgICR0YWJDaGlsZFtuXS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW92ZXInLCAoZSkgPT4ge1xuICAgICAgICBpbmRleCA9IG47XG4gICAgICAgIHN0ZXAgPSAtMSAqIGluZGV4ICogMTAwIC8gX2NoaWxkTGVuZ3RoO1xuICAgICAgICBmb3IgKGxldCB2YWwgb2YgJHRhYkNoaWxkKSB7XG4gICAgICAgICAgdmFsLmNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAkdGFiQ2hpbGRbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ29uJyk7XG4gICAgICAgICRjb250YWluZXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZSgnICsgc3RlcCArICclJyArICcsIDApJztcbiAgICAgICAgaWYgKF9vYmouc2xpZGVyKSB7XG4gICAgICAgICAgJGJhci5zdHlsZS5tYXJnaW5MZWZ0ID0gMSAvIF9jaGlsZExlbmd0aCAqIGluZGV4ICogMTAwICsgJyUnO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgJHRhYkNoaWxkW25dLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgICAgICBpbmRleCA9IG47XG4gICAgICAgIGNvbnNvbGUubG9nKGluZGV4KTtcbiAgICAgICAgc3RlcCA9IC0xICogaW5kZXggKiAxMDAgLyBfY2hpbGRMZW5ndGg7XG4gICAgICAgIGZvciAobGV0IHZhbCBvZiAkdGFiQ2hpbGQpIHtcbiAgICAgICAgICB2YWwuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcbiAgICAgICAgfVxuXG4gICAgICAgICR0YWJDaGlsZFtpbmRleF0uY2xhc3NMaXN0LmFkZCgnb24nKTtcbiAgICAgICAgJGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyBzdGVwICsgJyUnICsgJywgMCknO1xuICAgICAgICBpZiAoX29iai5zbGlkZXIpIHtcbiAgICAgICAgICAkYmFyLnN0eWxlLm1hcmdpbkxlZnQgPSAxIC8gX2NoaWxkTGVuZ3RoICogaW5kZXggKiAxMDAgKyAnJSc7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0pKGkpXG4gIH1cblxuICBsZXQgJGJhciA9IF9vYmouc2xpZGVyID8gaW5pdFRhYlVuZGVybGluZShfb2JqLnRhYiwgX29iai5zbGlkZXIpIDogbnVsbDtcblxuICBsZXQgJGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX29iai5zbGlkZSk7XG4gIGxldCAkc2xpZGVDaGlsZCA9ICR0YWIuY2hpbGRyZW47XG5cbiAgJGNvbnRhaW5lci5zdHlsZS53aWR0aCA9IF9jaGlsZExlbmd0aCAqIDEwMCArICclJztcblxuICBsZXQgJGxpc3RDaGlsZCA9ICRjb250YWluZXIuY2hpbGRyZW47XG4gIGZvciAobGV0IHZhbCBvZiAkbGlzdENoaWxkKSB7XG4gICAgdmFsLnN0eWxlLndpZHRoID0gMSAvIF9jaGlsZExlbmd0aCAqIDEwMCArICclJztcbiAgfVxuXG4gIC8vICR0YWIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgKGUpID0+IHtcbiAgLy8gICBpZiAoZS50YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoX29iai50YWIucmVwbGFjZSgnLicsICcnKSkgPiAtMSkge1xuICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAvLyAgIH1cbiAgLy8gICBsZXQgb2Zmc2V0WCA9IGUudGFyZ2V0Lm9mZnNldExlZnQgLSB0YWJPZmZzZXRMZWZ0ID4gMCA/IGUudGFyZ2V0Lm9mZnNldExlZnQgLSB0YWJPZmZzZXRMZWZ0IDogZS50YXJnZXQub2Zmc2V0TGVmdDtcbiAgLy8gICBpbmRleCA9IE1hdGguZmxvb3Iob2Zmc2V0WCAvIHRhYldpZHRoKTtcbiAgLy8gICBzdGVwID0gLTEgKiBpbmRleCAqIDEwMCAvIF9jaGlsZExlbmd0aDtcbiAgLy8gICBmb3IgKGxldCB2YWwgb2YgJHRhYkNoaWxkKSB7XG4gIC8vICAgICB2YWwuY2xhc3NMaXN0LnJlbW92ZSgnb24nKTtcbiAgLy8gICB9XG5cbiAgLy8gICAkdGFiQ2hpbGRbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ29uJyk7XG4gIC8vICAgJGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyBzdGVwICsgJyUnICsgJywgMCknO1xuICAvLyAgICRiYXIuc3R5bGUubWFyZ2luTGVmdCA9IDEgLyBfY2hpbGRMZW5ndGggKiBpbmRleCAqIDEwMCArICclJztcbiAgLy8gfSk7XG5cbiAgJGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKGUpID0+IHtcbiAgICB0b3VjaE9mZnNldFggPSBlLnRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICB0b3VjaE9mZnNldFkgPSBlLnRvdWNoZXNbMF0uY2xpZW50WTtcbiAgfSwgZmFsc2UpO1xuXG4gICRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgKGUpID0+IHtcbiAgICBpZiAoY2FuVG91Y2gpIHtcbiAgICAgIGxldCBkaXN0YW5jZVggPSBNYXRoLmFicyh0b3VjaE9mZnNldFggLSBlLnRvdWNoZXNbMF0uY2xpZW50WCksXG4gICAgICAgIGRpc3RhbmNlWSA9IE1hdGguYWJzKHRvdWNoT2Zmc2V0WSAtIGUudG91Y2hlc1swXS5jbGllbnRZKTtcblxuICAgICAgaWYgKGRpc3RhbmNlWCA+IGRpc3RhbmNlWSkge1xuICAgICAgICBjYW5Ub3VjaCA9IGZhbHNlO1xuICAgICAgICB0b3VjaE9mZnNldFggLSBlLnRvdWNoZXNbMF0uY2xpZW50WCA+IDAgPyBmb28uc2xpZGVUb05leHQoKSA6IGZvby5zbGlkZVRvUHJldigpO1xuICAgICAgfVxuICAgIH1cbiAgfSwgZmFsc2UpO1xuXG4gICRjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoZSkgPT4ge1xuICAgIGNhblRvdWNoID0gdHJ1ZTtcbiAgfSwgZmFsc2UpO1xuXG4gIGlmIChhdXRvKSB7XG4gICAgdmFyIHNsaWRlaW5UaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIGZvby5zbGlkZVRvTmV4dCgpO1xuICAgIH0sIGF1dG8pO1xuICB9XG5cbiAgdmFyIGZvbyA9IHtcbiAgICBzbGlkZVRvTmV4dDogKCkgPT4ge1xuICAgICAgaW5kZXgrKztcbiAgICAgIGlmIChpbmRleCA9PSBfY2hpbGRMZW5ndGgpIHtcbiAgICAgICAgaW5kZXggPSBsb29wID8gMCA6IF9jaGlsZExlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IHZhbCBvZiAkdGFiQ2hpbGQpIHtcbiAgICAgICAgdmFsLmNsYXNzTGlzdC5yZW1vdmUoJ29uJyk7XG4gICAgICB9XG5cbiAgICAgICR0YWJDaGlsZFtpbmRleF0uY2xhc3NMaXN0LmFkZCgnb24nKTtcblxuICAgICAgc3RlcCA9IC0xICogaW5kZXggKiAxMDAgLyBfY2hpbGRMZW5ndGg7XG4gICAgICAkdGFiQ2hpbGRbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ29uJyk7XG4gICAgICAkY29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoJyArIHN0ZXAgKyAnJScgKyAnLCAwKSc7XG5cbiAgICAgIGlmIChfb2JqLnNsaWRlcikge1xuICAgICAgICAkYmFyLnN0eWxlLm1hcmdpbkxlZnQgPSAxIC8gX2NoaWxkTGVuZ3RoICogaW5kZXggKiAxMDAgKyAnJSc7XG4gICAgICB9XG5cbiAgICB9LFxuICAgIHNsaWRlVG9QcmV2OiAoKSA9PiB7XG4gICAgICBpbmRleC0tO1xuXG4gICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgIGluZGV4ID0gbG9vcCA/IF9jaGlsZExlbmd0aCAtIDEgOiAwO1xuICAgICAgfVxuXG4gICAgICBmb3IgKGxldCB2YWwgb2YgJHRhYkNoaWxkKSB7XG4gICAgICAgIHZhbC5jbGFzc0xpc3QucmVtb3ZlKCdvbicpO1xuICAgICAgfVxuXG4gICAgICAkdGFiQ2hpbGRbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ29uJyk7XG5cbiAgICAgIHN0ZXAgPSAtMSAqIGluZGV4ICogMTAwIC8gX2NoaWxkTGVuZ3RoO1xuICAgICAgJHRhYkNoaWxkW2luZGV4XS5jbGFzc0xpc3QuYWRkKCdvbicpO1xuICAgICAgJGNvbnRhaW5lci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlKCcgKyBzdGVwICsgJyUnICsgJywgMCknO1xuXG4gICAgICBpZiAoX29iai5zbGlkZXIpIHtcbiAgICAgICAgJGJhci5zdHlsZS5tYXJnaW5MZWZ0ID0gMSAvIF9jaGlsZExlbmd0aCAqIGluZGV4ICogMTAwICsgJyUnO1xuICAgICAgfVxuXG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHtnZXRDc3NMaW5rLCBnZXRTY3JpcHR9IGZyb20gJy4uLy4uL3V0aWwvdGdhbmltZS11dGlsJ1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0U2xpZGVCb29rKF9vYmopIHtcbiAgbGV0IGludGVybGVhdmVPZmZzZXQgPSAwLjU7XG4gIGxldCBzd2lwZXJPcHRpb25zID0ge1xuICAgIGxvb3A6IHRydWUsXG4gICAgc3BlZWQ6IDYwMCxcbiAgICBncmFiQ3Vyc29yOiB0cnVlLFxuICAgIHdhdGNoU2xpZGVzUHJvZ3Jlc3M6IHRydWUsXG4gICAgbW91c2V3aGVlbENvbnRyb2w6IHRydWUsXG4gICAga2V5Ym9hcmRDb250cm9sOiB0cnVlLFxuICAgIG5hdmlnYXRpb246IHtcbiAgICAgIG5leHRFbDogXCIuc3dpcGVyLWJ1dHRvbi1uZXh0XCIsXG4gICAgICBwcmV2RWw6IFwiLnN3aXBlci1idXR0b24tcHJldlwiXG4gICAgfSxcbiAgICBvbjoge1xuICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHN3aXBlciA9IHRoaXM7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3dpcGVyLnNsaWRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxldCBzbGlkZVByb2dyZXNzID0gc3dpcGVyLnNsaWRlc1tpXS5wcm9ncmVzcztcbiAgICAgICAgICBsZXQgaW5uZXJPZmZzZXQgPSBzd2lwZXIud2lkdGggKiBpbnRlcmxlYXZlT2Zmc2V0O1xuICAgICAgICAgIGxldCBpbm5lclRyYW5zbGF0ZSA9IHNsaWRlUHJvZ3Jlc3MgKiBpbm5lck9mZnNldDtcbiAgICAgICAgICBzd2lwZXIuc2xpZGVzW2ldLnF1ZXJ5U2VsZWN0b3IoXCIudGdhbmltZS1zbGlkZS1pbm5lclwiKS5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZTNkKFwiICsgaW5uZXJUcmFuc2xhdGUgKyBcInB4LCAwLCAwKVwiO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdG91Y2hTdGFydDogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgc3dpcGVyID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlc1tpXS5zdHlsZS50cmFuc2l0aW9uID0gXCJcIjtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHNldFRyYW5zaXRpb246IGZ1bmN0aW9uIChzcGVlZCkge1xuICAgICAgICBsZXQgc3dpcGVyID0gdGhpcztcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzd2lwZXIuc2xpZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlc1tpXS5zdHlsZS50cmFuc2l0aW9uID0gc3BlZWQgKyBcIm1zXCI7XG4gICAgICAgICAgc3dpcGVyLnNsaWRlc1tpXS5xdWVyeVNlbGVjdG9yKFwiLnRnYW5pbWUtc2xpZGUtaW5uZXJcIikuc3R5bGUudHJhbnNpdGlvbiA9IHNwZWVkICsgXCJtc1wiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGdldENzc0xpbmsoJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL1N3aXBlci80LjAuNy9jc3Mvc3dpcGVyLm1pbi5jc3MnLCBmdW5jdGlvbiAoKSB7XG4gICAgZ2V0U2NyaXB0KHtcbiAgICAgIHVybDogJ2h0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL1N3aXBlci80LjAuNy9qcy9zd2lwZXIubWluLmpzJyxcbiAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCBvcHQgPSBPYmplY3QuYXNzaWduKHN3aXBlck9wdGlvbnMsIF9vYmopO1xuICAgICAgICBsZXQgc3dpcGVyID0gbmV3IFN3aXBlcihfb2JqLmNvbnRhaW5lciwgb3B0KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdEhlYWRlckZpeCgpIHtcbiAgbGV0ICRoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGdhbmltZS1oZWFkZXItZml4JyksXG4gICAgZGVmYXVsdFRvcCA9ICRoZWFkZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wLFxuICAgIGRlZmF1bHRIZWlnaHQgPSAkaGVhZGVyLmNsaWVudEhlaWdodDtcblxuICBsZXQgJGhlYWRlckNoaWxkLFxuICAgICAgaGVhZGVySGVpZ2h0QXJyID0gW107XG5cbiAgbGV0IGZuID0ge1xuICAgIGluaXQ6ICgpID0+IHtcbiAgICAgICRoZWFkZXJDaGlsZCA9IGZuLnF1ZXJ5Q2hpbGQoJGhlYWRlcik7XG5cbiAgICAgIGZvciAobGV0IGVsIG9mICRoZWFkZXJDaGlsZCkge1xuICAgICAgICBoZWFkZXJIZWlnaHRBcnIucHVzaCggZWwuY2xpZW50SGVpZ2h0ICk7XG4gICAgICB9XG4gICAgfSxcbiAgICBzY2FsZUhlYWRlcjogKCkgPT4ge1xuICAgICAgLy8gJGhlYWRlci5zdHlsZS5oZWlnaHQgPSBkZWZhdWx0SGVpZ2h0IC8gMiArICdweCc7XG5cbiAgICAgICRoZWFkZXIuY2xhc3NMaXN0LmFkZCgnZml4Jyk7XG4gICAgfSxcbiAgICByZXNldENoaWxkOiAoKSA9PiB7XG4gICAgICAkaGVhZGVyLnN0eWxlLmhlaWdodCA9ICdhdXRvJztcblxuICAgICAgbGV0ICRoZWFkZXJDaGlsZCA9IGZuLnF1ZXJ5Q2hpbGQoJGhlYWRlcik7XG5cbiAgICAgIGZvciAobGV0IGVsIG9mICRoZWFkZXJDaGlsZCkge1xuICAgICAgICBlbC5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5mb3JtIC4zcyBlYXNlLWluLW91dCc7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9ICd0b3AgbGVmdCc7XG4gICAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGVZKDApJztcbiAgICAgIH1cbiAgICB9LFxuICAgIHF1ZXJ5Q2hpbGQ6IChfZWwpID0+IHtcbiAgICAgIGxldCAkY2hpbGRyZW4gPSBfZWwuY2hpbGRyZW47XG5cbiAgICAgIGlmICgkY2hpbGRyZW4ubGVuZ3RoID09IDEpIHtcbiAgICAgICAgcmV0dXJuIGZuLnF1ZXJ5Q2hpbGQoJGNoaWxkcmVuWzBdKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiAkY2hpbGRyZW47XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZm4uaW5pdCgpO1xuXG4gIGlmICh3aW5kb3cuc2Nyb2xsWSAhPSAwKSB7XG4gICAgZGVmYXVsdFRvcCA9IHdpbmRvdy5zY3JvbGxZICsgZGVmYXVsdFRvcDtcbiAgICBmbi5zY2FsZUhlYWRlcigpO1xuICB9XG5cbiAgd2luZG93Lm9uc2Nyb2xsID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+PSBkZWZhdWx0VG9wKSB7XG4gICAgICBpZiAoJGhlYWRlci5jbGFzc05hbWUuaW5kZXhPZignIGZpeCcpIDwgMCkge1xuICAgICAgICBmbi5zY2FsZUhlYWRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAkaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ZpeCcpO1xuICAgICAgLy8gZm4ucmVzZXRDaGlsZCgpO1xuICAgIH1cbiAgfVxuXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdE92ZXJsYXlGYWRlaW4oX29iaikge1xuICBsZXQgJG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF9vYmoub3ZlcmxheSk7XG4gIGxldCAkdHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoX29iai50cmlnZ2VyKTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKF9vYmoub3ZlcmxheSkgPCAwICYmICRvdmVybGF5LmNsYXNzTmFtZS5pbmRleE9mKCdzaG93JykgPiAtMSkge1xuICAgICAgJG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgnZmFkZWluJyk7XG5cbiAgICAgIGxldCB0cmlnZ2VySGlkZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICRvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3cnKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRyaWdnZXJIaWRlVGltZXIpO1xuICAgICAgfSwgMTAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGUudGFyZ2V0LmNsYXNzTmFtZS5pbmRleE9mKF9vYmoudHJpZ2dlci5yZXBsYWNlKCcuJywgJycpKSA+IC0xICYmICRvdmVybGF5LmNsYXNzTmFtZS5pbmRleE9mKCdzaG93JykgPCAwKSB7XG4gICAgICAgICRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3Nob3cnKTtcblxuICAgICAgICBsZXQgdHJpZ2dlclNob3dUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ2ZhZGVpbicpO1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0cmlnZ2VyU2hvd1RpbWVyKTtcbiAgICAgICAgfSwgMTAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5pdFRvdG9wKF9vYmopIHtcbiAgbGV0ICR0b3BCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKF9vYmouY29udGFpbmVyKTtcbiAgbGV0IHRpbWVyO1xuXG4gICR0b3BCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdXRpbC5zY3JvbGxUb1RvcCgpO1xuICB9KVxuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoZSkgPT4ge1xuICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICB9KTtcblxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXdoZWVsJywgKGUpID0+IHtcbiAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgfSk7XG5cbiAgbGV0IHV0aWwgPSB7XG4gICAgc2Nyb2xsVG9Ub3A6ICgpID0+IHtcbiAgICAgIGxldCBpc1RvcCA9IHRydWUsXG4gICAgICAgIGNhbmNlbFNjcm9sbCA9IGZhbHNlO1xuXG4gICAgICBpZiAoY2FuY2VsU2Nyb2xsID09IGZhbHNlKSB7XG4gICAgICAgIHRpbWVyID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGxldCBvc1RvcCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgfHwgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7XG4gICAgICAgICAgbGV0IGlzcGVlZCA9IE1hdGguZmxvb3IoLW9zVG9wIC8gMyk7XG4gICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCA9IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wID0gb3NUb3AgKyBpc3BlZWQ7XG4gICAgICAgICAgaXNUb3AgPSB0cnVlO1xuICAgICAgICAgIGlmIChvc1RvcCA9PSAwKSB7XG4gICAgICAgICAgICBjbGVhckludGVydmFsKHRpbWVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDUwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICAgICAgICBjYW5jZWxTY3JvbGwgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufSJdLCJzb3VyY2VSb290IjoiIn0=